<!DOCTYPE html>
<html>
<head>
<title>Admin Dashboard</title>

<style>

body{
  font-family: Arial;
  background:#111;
  color:white;
  padding:40px;
}

.container{
  max-width:700px;
  margin:auto;
}

.card{
  background:#1f1f1f;
  padding:25px;
  border-radius:10px;
  margin-top:20px;
}

.active{
  color:lime;
}

.expired{
  color:red;
}

button{
  padding:10px 20px;
  margin-top:15px;
  cursor:pointer;
}

</style>

</head>

<body>

<div class="container">

<h1>Admin Control Panel</h1>

<div class="card" id="adminData"></div>

<button onclick="clearSub()">Remove Subscription</button>
<button onclick="logout()">Logout</button>

</div>

<script>

// ADMIN PASSWORD
let pass = prompt("Enter Admin Password");

if(pass !== "admin123"){
  alert("Access denied");
  window.location.href="login.html";
}
let users = JSON.parse(localStorage.getItem("users")) || [];

if(users.length > 0){

  let html = "<h3>Registered Users</h3>";

  users.forEach(u=>{
    html += "User: " + u.username + "<br>";
  });

  document.getElementById("adminData").innerHTML = html;

}else{
  document.getElementById("adminData").innerHTML =
  "No registered users yet";
}


// GET SUBSCRIPTION
let sub = JSON.parse(localStorage.getItem("subscription"));

if(sub){

  let today = new Date();
  let expiry = new Date(sub.expiry);

  let status = today > expiry
  ? "<span class='expired'>EXPIRED</span>"
  : "<span class='active'>ACTIVE</span>";

  document.getElementById("adminData").innerHTML = `
    <h3>User Details</h3>
    Username: ${sub.user}<br>
    Plan: ${sub.plan}<br>
    Price: KSh ${sub.price}<br>
    Start: ${sub.start}<br>
    Expiry: ${sub.expiry}<br>
    Status: ${status}
  `;

}else{
  document.getElementById("adminData").innerHTML =
  "No active subscriptions found";
}


// REMOVE SUBSCRIPTION
function clearSub(){
  localStorage.removeItem("subscription");
  alert("Subscription removed");
  location.reload();
}


// LOGOUT
function logout(){
  localStorage.removeItem("loggedIn");
  window.location.href="login.html";
}

</script>

</body>
</html>
